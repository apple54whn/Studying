

# 1 CMS é¡µé¢ç®¡ç†

CMSç®¡ç†ï¼Œå¯¹cms_pageçš„å¢åˆ æ”¹æŸ¥ã€‚å¹¶ä¸”æ¯ä¸ªcms_pageéƒ½æœ‰å…¶ç‰¹æœ‰çš„æ•°æ®ï¼Œé€šè¿‡**dataUrl**å¯ä»¥æ‰¾åˆ°

æ¯ä¸ª**cms_page**éƒ½æœ‰æ‰€å±çš„**cms_template**ï¼ˆæ ¹æ®æ¨¡æ¿å’ŒdataUrlé™æ€åŒ–æˆé¡µé¢ï¼‰å’Œæ‰€å±çš„**cms_site**ï¼ˆå¦‚é¦–é¡µï¼Œè½®æ’­å›¾ï¼Œè¯¦ç»†ä¿¡æ¯ï¼‰

![1552072414636](images/1552072414636.png)

![1552072378874](images/1552072378874.png)

"dataUrl" : "http://localhost:31001/cms/config/getmodel/5a791725dd573c3574ee333f"



# 2 é¡µé¢é™æ€åŒ–

![1552072547479](images/1552072547479.png)



é¡µé¢é™æ€åŒ–éœ€è¦ï¼š

* æ•°æ®ï¼šåˆ©ç”¨OkHttpClientå°è£…çš„**RestTemplate**è¯·æ±‚**cms_pageçš„dataUrl**è·å–**cms_configä¸­æ•°æ®**ï¼Œå¦‚ä¸‹ï¼š
* æ¨¡æ¿ï¼šåˆ©ç”¨FreeMakerçš„**ftl**å’Œä¸Šè¿°è·å–çš„æ•°æ®ç»„åˆ

![1552072587362](images/1552072587362.png)



æ¨¡æ¿çš„å¢åˆ æ”¹æ¨¡å—æ²¡æœ‰å®ç°ï¼Œé‡‡ç”¨æ‰‹åŠ¨æ–¹å¼ğŸ˜„ï¼Œå…¶ä¿¡æ¯å­˜å‚¨åœ¨**cms_template**ä¸­ï¼Œ**æ¨¡æ¿æ–‡ä»¶**å­˜å‚¨åœ¨**GridFS**æ–‡ä»¶ç³»ç»Ÿä¸­

```json
{
    "_id" : ObjectId("5a962b52b00ffc514038faf7"),
    "_class" : "com.xuecheng.framework.domain.cms.CmsTemplate",
    "siteId" : "5a751fab6abb5044e0d19ea1",
    "templateName" : "é¦–é¡µ",
    "templateParameter" : "",
    "templateFileId" : "5a962b52b00ffc514038faf5"
}
```

**templateFileId**å°±æ˜¯å­˜å‚¨åœ¨**GridFS**ä¸­çš„**æ¨¡æ¿æ–‡ä»¶ID**

![1552073154835](images/1552073154835.png)



![1550989837755](images/1550989837755.png)

1ã€å¦‚æœå‘å¸ƒåˆ°æœåŠ¡å™¨çš„é¡µé¢å†…å®¹ä¸æ­£ç¡®æ€ä¹ˆåŠï¼Ÿ

2ã€ä¸€ä¸ªé¡µé¢éœ€è¦å‘å¸ƒå¾ˆå¤šæœåŠ¡å™¨ï¼Œç‚¹å‡»â€œå‘å¸ƒâ€åå¦‚ä½•çŸ¥é“è¯¦ç»†çš„å‘å¸ƒç»“æœï¼Ÿ

3ã€ä¸€ä¸ªé¡µé¢å‘å¸ƒåˆ°å¤šä¸ªæœåŠ¡å™¨ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæœåŠ¡å™¨å‘å¸ƒå¤±è´¥æ—¶æ€ä¹ˆåŠï¼Ÿ

